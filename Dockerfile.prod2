# FROM dunglas/frankenphp
FROM composer:latest AS composer

WORKDIR /app

COPY . /app
RUN composer install --no-dev --no-interaction --no-progress --no-suggest

FROM dunglas/frankenphp

RUN install-php-extensions \
    pcntl \
    pdo_pgsql

COPY --from=composer /app /app
WORKDIR /app

ENTRYPOINT ["php", "artisan", "octane:frankenphp"]
